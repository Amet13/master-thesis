%%% Необходимые пакеты для работы с презентацией
\usepackage{wrapfig}
\usepackage{xcolor}
\usepackage{etoolbox}

\ProvidesPackage{beamerthemeMasterThesis}[2014/06/10] % Название темы и дата создания
\usefonttheme{default} % Стандартный шрифт темы

%%% Определение цветовых схем
\definecolor{Blue}{cmyk}{1,0.66,0,0.02}        % My color
\definecolor{Green}{cmyk}{0.69,0,1,0}          % Pantone 361
\definecolor{Red}{cmyk}{0,0.95,1,0.29}         % Pantone 484
\definecolor{Orange}{cmyk}{0,0.42,0.77,0}      % Pantone 131
\setbeamercolor{WhiteOnBlue}{bg=Blue,fg=white} % White on my color
\setbeamercolor{BlueOnWhite}{fg=Blue,bg=white} % My color on White

%%% Гиперссылки
\usepackage{hyperref}
\hypersetup{
    unicode=true,    % русские буквы в раздела PDF
    colorlinks=true, % false: ссылки в рамках; true: цветные
    linkcolor=Blue,  % внутренние ссылки
    citecolor=Blue,  % на библиографию
    filecolor=Blue,  % на файлы
    urlcolor=Blue    % на URL
}

%%% Оформление стиля
\setbeamertemplate{navigation symbols}{}  % Полупрозрачная панель навигации (закомментировать, если надо включить)
\setbeamertemplate{itemize items}[circle] % Стиль маркера списка: triangle, circle, square, ball
\setbeamertemplate{theorems}[numbered]    % Нумерация теорем

%%% Установка цветов для различных объектов (см. Beamer User Guide)
\usecolortheme[named=Blue]{structure}
\setbeamercolor{background canvas}{bg=white}
\setbeamercolor{frametitle}{bg=white}  % Белый фон
\setbeamercolor{frametitle}{fg=Blue}   % Синий текст

\setbeamercolor{headline}{bg=Blue}
\setbeamercolor{alerted text}{fg=Red}
\setbeamercolor{itemize item}{fg=Blue}
\setbeamercolor{itemize subitem}{fg=Blue}
\setbeamercolor{itemize subsubitem}{fg=Blue}
\setbeamercolor{block title example}{fg=Green}
\AtBeginEnvironment{exampleblock}{
    \setbeamercolor{itemize item}{fg=Green}
    \setbeamercolor{itemize subitem}{fg=Green}
    \setbeamercolor{itemize subsubitem}{fg=Green}
}
\setbeamercolor{palette primary}{bg=Blue}
\setbeamercolor{palette primary}{fg=white}
\setbeamercolor{palette secondary}{bg=Blue}
\setbeamercolor{palette secondary}{fg=white}
\setbeamercolor{palette tertiary}{bg=Blue}
\setbeamercolor{palette tertiary}{fg=white}

%%% Заголовки и логотипы
\setbeamertemplate{headline}[default]{} % Пустой заголовок
\setbeamertemplate{frametitle}{
    \nointerlineskip
    \begin{beamercolorbox}[sep=0.3cm,wd=\paperwidth]{frametitle}
        \vbox{}\vskip-0.7ex
        \strut\insertframetitle \\
        \small\strut\insertframesubtitle
        \vskip-1ex
    \end{beamercolorbox}
}

%%% Нижний бар
\makeatletter
\setbeamertemplate{footline}{
    \leavevmode%
    \hbox{%
        \begin{beamercolorbox}[wd=.2\paperwidth,ht=2ex,dp=1ex,left]{BlueOnWhite}
            \usebeamerfont{author in head/foot}
        \end{beamercolorbox}%
        \begin{beamercolorbox}[wd=.6\paperwidth,ht=2ex,dp=1ex,center]{BlueOnWhite}
            \usebeamerfont{title in head/foot}
            % \insertshorttitle % Не вставляем название презентации в нижний бар
        \end{beamercolorbox}%
        \begin{beamercolorbox}[wd=.2\paperwidth,ht=2ex,dp=1ex,right]{BlueOnWhite}
            \usebeamerfont{date in head/foot}
            \insertframenumber{} / \inserttotalframenumber\hspace*{2ex}
        \end{beamercolorbox}%
    }
    \vskip0pt%
}
